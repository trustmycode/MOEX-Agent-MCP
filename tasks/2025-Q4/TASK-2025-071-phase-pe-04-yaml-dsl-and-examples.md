---
id: TASK-2025-071
title: "Фаза PE.4. YAML-DSL для сценариев и примеры"
status: backlog
priority: low
type: spike
estimate: 10h
assignee: @unassigned
created: 2025-12-10
updated: 2025-12-10
parents: [TASK-2025-051]
arch_refs: [ARCH-agent-moex-market-analyst]
risk: medium
benefit: "Описывает целевой YAML-формат сценариев и примеры для portfolio_risk и ещё одного ключевого сценария."
audit_log:
  - {date: 2025-12-10, user: "@AI-DocArchitect", action: "created with status backlog"}
---

## Описание

Спроектировать целевой YAML-формат описания сценариев (DSL) и подготовить примеры YAML для `portfolio_risk` и одного дополнительного сценария, задокументировав, как в будущем YAML будет трансформироваться в ScenarioTemplates без релиза кода.

## Критерии приемки

- В документации добавлен раздел с описанием YAML-DSL для сценариев, включающий:
  - базовые сущности (steps, tools, зависимости, on_error);
  - привязку к `scenario_type`;
  - механику указания ограничений и режимов.
- Подготовлены и приведены в документации как минимум два YAML-примера:
  - для сценария `portfolio_risk` с шагами `parse_portfolio`, `limit_portfolio`, вызовами MCP и формированием отчёта;
  - для сценария `compare_securities` или `index_risk_scan`.
- Ясно описано, что на текущем этапе рабочий код использует Python-шаблоны, а YAML служит дорожной картой для будущего импорта.

## Определение готовности

- YAML-DSL достаточно детализирован, чтобы по нему можно было реализовать парсер в отдельной фазе без дополнительных согласований.

## Заметки

Реализация парсера YAML → `ScenarioTemplate` и загрузка сценариев из файловых ресурсов остаются за рамками текущего хакатона.
