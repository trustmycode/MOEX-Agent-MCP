# Roadmap задач для сценариев 5 / 7 / 9 (Multi-Agent Edition)

## 1. Как читать эту таблицу

- **Цель файла**: Актуальный план реализации MVP к дедлайну (12 число).
- **Изменения от 12.12**: Переход на **Мультиагентную архитектуру** (Orchestrator + Subagents). Старые задачи по монолитному агенту и RAG перенесены в архив.
- **Приоритет**:
  - **P0** — Critical Path. Без этого нет MVP.
  - **P1** — Важно для демо, делать сразу после P0.
  - **P2** — Nice-to-have / Roadmap.

## 2. Активный список задач (P0 - P1)

| # | ID задачи | Название (кратко) | Сценарии | Роль в системе | Приоритет | Статус |
|---|-----------|-------------------|----------|----------------|-----------|--------|
| **I. Фундамент и Данные (MCP)** |
| 1 | `TASK-2025-001` | Фаза 0. Требования и стек моделей | All | Фиксация LLM и правил | P0 | done |
| 2 | `TASK-2025-073` | Фаза 0.4. Проектирование API `moex_iss_sdk` | All | Единый клиент ISS | P0 | done |
| 3 | `TASK-2025-002` | Фаза 1. Базовый MCP `moex-iss-mcp` | All | Источник рыночных данных | P0 | done |
| 4 | `TASK-2025-076` | Фаза 2.1. Каркас `risk-analytics-mcp` | 7/9 | Сервер расчетов риска | P0 | done |
| 5 | `TASK-2025-077` | Фаза 2.2. Tool `compute_portfolio_risk_basic` | 7/9 | Базовый риск портфеля | P0 | done |
| 6 | `TASK-2025-103` | Стресс-сценарии и Var_light | 7/9 | Стресс-тесты в MCP | P0 | done |
| 7 | `TASK-2025-102` | Источник фундаментала `FundamentalsDataProvider` | 5 | Данные отчетности компаний | P0 | done |
| **II. Бизнес-логика в MCP (Tools)** |
| 8 | `TASK-2025-108` | Tool `issuer_peers_compare` | 5 | Сравнение с пирами (MCP) | P0 | planned |
| 9 | `TASK-2025-101` | Tool `suggest_rebalance` | 7 | Ребалансировка (MCP) | P0 | done |
| 10 | `TASK-2025-105` | Tool `cfo_liquidity_report` | 9 | Отчет для CFO (MCP) | P0 | done |
| **III. Мультиагентная Система (Agent Service)** |
| 11 | `TASK-2025-120` | **Архитектура мультиагентности** | All | BaseSubagent, Context, Registry | **P0** | new |
| 12 | `TASK-2025-121` | **MarketData & RiskAnalytics Subagents** | All | Рабочие агенты для вызова MCP | **P0** | new |
| 13 | `TASK-2025-123` | **Explainer & Dashboard Subagents** | 7/9 | Генерация JSON-UI и текста | **P0** | new |
| 14 | `TASK-2025-122` | **Orchestrator Agent (Router)** | All | Маршрутизация запросов | **P0** | new |
| **IV. Инфраструктура и Демо** |
| 15 | `TASK-2025-004` | Фаза 3. Инфраструктура и деплой | All | Docker, Cloud.ru Deploy | P0 | backlog |
| 16 | `TASK-2025-006` | Фаза 5. Web-UI (Minimal) | All | Рендеринг JSON от DashboardAgent | P1 | backlog |
| 17 | `TASK-2025-107` | Демо-сценарии и сторителлинг | All | Скрипты для питча | P1 | planned |

## 3. Отменено / Заморожено / Roadmap (Архив)

Эти задачи **не нужно делать** в рамках текущего спринта до 12 числа.

| ID задачи | Причина отмены/переноса | Статус |
|-----------|-------------------------|--------|
| `TASK-2025-003` (Agent MVP) | Заменена на мультиагентные задачи 120-123 | **Cancelled** |
| `TASK-2025-046` (Basic Planner) | Логика лимитов ушла в промпты сабагентов | **Cancelled** |
| `TASK-2025-104` (ScenarioTemplate) | Заменена логикой Оркестратора | **Cancelled** |
| `TASK-2025-110` (DashboardSubagent) | Дубликат, поглощена задачей 123 | **Cancelled** |
| `TASK-2025-005` (RAG Phase 1) | Ментор: "RAG не приоритет". Делаем, если останется время | **P2 / Hold** |
| `TASK-2025-111` (Micro-RAG) | ExplainerSubagent справится встроенными знаниями LLM | **P2 / Hold** |
| `TASK-2025-047`..`051` (Planner phases) | Сложный планировщик не нужен в новой архитектуре | **Cancelled** |
| `TASK-2025-008` (Advanced Risk) | Слишком сложно для MVP, хватит Var_light | **Roadmap** |
| `TASK-2025-112` (Voice Gateway) | Nice-to-have, только после работающего UI | **P2** |

## 4. План действий (Sprint Plan)

1.  **MCP Layer (Задачи 8, 9, 10):** Добиваем бизнес-логику в `risk-analytics-mcp`. Это "мозги" системы.
2.  **Agent Layer (Задачи 11, 12, 13, 14):** Собираем агентов.
    *   Сначала `120` (база).
    *   Потом параллельно `121` (воркеры) и `123` (репортеры).
    *   В конце `122` (оркестратор), чтобы связать всё вместе.
3.  **Integration (Задачи 15, 16):** Заворачиваем в Docker, деплоим, проверяем на UI.
