---
id: ARCH-web-ui
title: "Web-UI для moex-market-analyst-agent (люксовый фронт)"
type: frontend
layer: presentation
owner: @team-moex-agent
version: v1
status: draft
created: 2025-12-10
updated: 2025-12-10
tags: [web-ui, dashboard, luxe]
depends_on: [ARCH-agent-moex-market-analyst]
referenced_by: []
---

## Контекст

Web‑UI — опциональная витрина поверх A2A‑агента, предназначенная для
демонстрации сценариев 5/7/9 и удобной работы аналитиков/риск‑менеджеров/CFO
без прямого обращения к A2A‑API.

Цели:

- дать наглядные графики и таблицы по сценариям 5/7/9;
- предоставить удобные пресеты запросов (быстрый запуск `portfolio_risk`,
  `cfo_liquidity_report`, `issuer_peers_compare`);
- сделать демо и рабочий UX максимально близкими.

## Высокоуровневая архитектура

- **Frontend (SPA)** — React/Vue/Svelte (на выбор команды), статически
  обслуживаемый из CDN или простого веб‑сервера.
- **Backend-прокси (опционально)** — тонкий backend (FastAPI/Express) для:
  - проксирования запросов во внутренний A2A‑endpoint агента;
  - унификации аутентификации/авторизации;
  - добавления кэширования/ограничения частоты запросов.

Связь с агентом:

- UI отправляет запросы в backend/A2A‑endpoint с JSON `input.messages[]`;
- получает `output.text` и `output.tables[]` и отображает их в виде:
  - текстового резюме;
  - табличных и графических виджетов (ценовые ряды, структуру портфеля,
    ликвидные buckets и др.).

## Основные экраны

1. **Главный экран (чат/командная строка)**
   - Поле ввода запроса (NL‑текст на русском).
   - История диалога и результатов.
   - Быстрые кнопки/пресеты: «Портфельный риск», «Отчёт CFO»,
     «Сравнение эмитента с пирами».

2. **Экран `portfolio_risk` (сценарий 7)**
   - Форма загрузки портфеля (CSV/JSON/ручной ввод).
   - Блок метрик портфеля (доходность, Var_light, max drawdown,
     концентрации по эмитенту/сектору/валюте).
   - Таблица top‑N позиций и строка «прочие».
   - Графики: распределение по классам активов/сектору, вклад в риск.

3. **Экран `cfo_liquidity_report` (сценарий 9)**
   - Рендеринг структуры `CfoLiquidityReport`:
     - ликвидные buckets; 
     - stress‑сценарии и ковенанты;
     - summary‑выводы.
   - Экспорт в Markdown/HTML и, опционально, в формат для BI.

4. **Экран `issuer_peers_compare` (сценарий 5)**
   - Форма выбора эмитента (тикер/ISIN) и параметров выборки пиров.
   - Таблица peers с мультипликаторами и рисковыми метриками.
   - Визуализации (box‑plots/бар‑чарты) по ключевым показателям.

## Наблюдаемость и безопасность

- Логирование действий пользователей (без чувствительных данных портфеля).
- Отдельные метрики UI (количество запросов по сценариям, латентность,
  частота использования пресетов).
- Аутентификация через существующую SSO/IDP заказчика (в реальном внедрении).

## Эволюция

- Поддержка сохранённых запросов/отчётов.
- Интеграция с порталом CFO/внутренним BI.
- Визуальные конфигураторы лимитов и стресс‑сценариев.


